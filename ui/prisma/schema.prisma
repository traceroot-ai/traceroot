  generator client {                                                                                                                                                                                                                         
    provider = "prisma-client-js"                                                                                                                                                                                                            
  }                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                             
  datasource db {                                                                                                                                                                                                                            
    provider = "postgresql"                                                                                                                                                                                                                  
    url      = env("DATABASE_URL")                                                                                                                                                                                                           
  }                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                             
  model ApiKey {                                                                                                                                                                                                                             
    id           String    @id @db.VarChar                                                                                                                                                                                                   
    project_id   String    @db.VarChar                                                                                                                                                                                                       
    key_hash     String    @unique @db.VarChar                                                                                                                                                                                               
    key_prefix   String    @db.VarChar                                                                                                                                                                                                       
    name         String?   @db.VarChar                                                                                                                                                                                                       
    expires_at   DateTime? @db.Timestamp(6)                                                                                                                                                                                                  
    last_used_at DateTime? @db.Timestamp(6)                                                                                                                                                                                                  
    created_at   DateTime  @default(now()) @db.Timestamp(6)                                                                                                                                                                                  
    project      Project   @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction)                                                                                                                          
                                                                                                                                                                                                                                             
    @@index([project_id], map: "ix_api_key_project_id")                                                                                                                                                                                      
    @@map("api_keys")                                                                                                                                                                                                                        
  }                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                             
  model MembershipInvitation {                                                                                                                                                                                                               
    id                 String        @id @db.VarChar                                                                                                                                                                                         
    email              String        @db.VarChar                                                                                                                                                                                             
    org_id             String        @db.VarChar                                                                                                                                                                                             
    org_role           String        @db.VarChar                                                                                                                                                                                             
    invited_by_user_id String?       @db.VarChar                                                                                                                                                                                             
    created_at         DateTime      @default(now()) @db.Timestamp(6)                                                                                                                                                                        
    updated_at         DateTime      @default(now()) @db.Timestamp(6)                                                                                                                                                                        
    user               User?         @relation(fields: [invited_by_user_id], references: [id], onUpdate: NoAction)                                                                                                                           
    organization       Organization  @relation(fields: [org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)                                                                                                                    
                                                                                                                                                                                                                                             
    @@unique([email, org_id], map: "uq_invitation_email_org")                                                                                                                                                                                
    @@index([org_id], map: "ix_invitation_org_id")                                                                                                                                                                                           
    @@map("membership_invitations")                                                                                                                                                                                                          
  }                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                             
  model OrganizationMembership {                                                                                                                                                                                                             
    id            String        @id @db.VarChar                                                                                                                                                                                              
    org_id        String        @db.VarChar                                                                                                                                                                                                  
    user_id       String        @db.VarChar                                                                                                                                                                                                  
    role          String        @db.VarChar                                                                                                                                                                                                  
    created_at    DateTime      @default(now()) @db.Timestamp(6)                                                                                                                                                                             
    updated_at    DateTime      @default(now()) @db.Timestamp(6)                                                                                                                                                                             
    organization  Organization  @relation(fields: [org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)                                                                                                                         
    user          User          @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)                                                                                                                        
                                                                                                                                                                                                                                             
    @@unique([org_id, user_id], map: "uq_org_user")                                                                                                                                                                                          
    @@index([org_id], map: "ix_membership_org_id")                                                                                                                                                                                           
    @@index([user_id], map: "ix_membership_user_id")                                                                                                                                                                                         
    @@map("organization_memberships")                                                                                                                                                                                                        
  }                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                             
  model Organization {                                                                                                                                                                                                                       
    id                       String                     @id @db.VarChar                                                                                                                                                                      
    name                     String                     @db.VarChar                                                                                                                                                                          
    created_at               DateTime                   @default(now()) @db.Timestamp(6)                                                                                                                                                     
    updated_at               DateTime                   @default(now()) @db.Timestamp(6)                                                                                                                                                     
    membershipInvitations    MembershipInvitation[]                                                                                                                                                                                          
    organizationMemberships  OrganizationMembership[]                                                                                                                                                                                        
    projects                 Project[]                                                                                                                                                                                                       
                                                                                                                                                                                                                                             
    @@map("organizations")                                                                                                                                                                                                                   
  }                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                             
  model Project {                                                                                                                                                                                                                            
    id             String        @id @db.VarChar                                                                                                                                                                                             
    org_id         String        @db.VarChar                                                                                                                                                                                                 
    name           String        @db.VarChar                                                                                                                                                                                                 
    retention_days Int?                                                                                                                                                                                                                      
    deleted_at     DateTime?     @db.Timestamp(6)                                                                                                                                                                                            
    created_at     DateTime      @default(now()) @db.Timestamp(6)                                                                                                                                                                            
    updated_at     DateTime      @default(now()) @db.Timestamp(6)                                                                                                                                                                            
    apiKeys        ApiKey[]                                                                                                                                                                                                                  
    organization   Organization  @relation(fields: [org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)                                                                                                                        
                                                                                                                                                                                                                                             
    @@index([org_id], map: "ix_project_org_id")                                                                                                                                                                                              
    @@map("projects")                                                                                                                                                                                                                        
  }                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                             
  model User {                                                                                                                                                                                                                               
    id                       String                     @id @default(cuid()) @db.VarChar                                                                                                                                                     
    email                    String?                    @unique @db.VarChar     
    emailVerified            DateTime?                  @map("email_verified")                                                                                                                                                              
    name                     String?                    @db.VarChar                                                                                                                                                                          
    password                 String?                    @db.VarChar                                                                                                                                                                          
    image                    String?                    @db.VarChar                                                                                                                                                                          
    admin                    Boolean                    @default(false)                                                                                                                                                                      
    created_at               DateTime                   @default(now()) @db.Timestamp(6)                                                                                                                                                     
    updated_at               DateTime                   @default(now()) @db.Timestamp(6)                                                                                                                                                     
    membershipInvitations    MembershipInvitation[]                                                                                                                                                                                          
    organizationMemberships  OrganizationMembership[]                                                                                                                                                                                        
    accounts                 Account[]                                                                                                                                                                                                       
                                                                                                                                                                                                                                             
    @@map("users")                                                                                                                                                                                                                           
  }                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                             
  model Account {                                                                                                                                                                                                                            
    id                String   @id @default(cuid())                                                                                                                                                                                          
    userId            String   @map("user_id")                                                                                                                                                                                               
    type              String                                                                                                                                                                                                                 
    provider          String                                                                                                                                                                                                                 
    providerAccountId String   @map("provider_account_id")                                                                                                                                                                                   
    refresh_token     String?  @db.Text                                                                                                                                                                                                      
    access_token      String?  @db.Text                                                                                                                                                                                                      
    expires_at        Int?                                                                                                                                                                                                                   
    token_type        String?                                                                                                                                                                                                                
    scope             String?                                                                                                                                                                                                                
    id_token          String?  @db.Text                                                                                                                                                                                                      
    session_state     String?                                                                                                                                                                                                                
    createdAt         DateTime @default(now()) @map("created_at")                                                                                                                                                                            
    updatedAt         DateTime @updatedAt @map("updated_at")                                                                                                                                                                                 
                                                                                                                                                                                                                                             
    user User @relation(fields: [userId], references: [id], onDelete: Cascade)                                                                                                                                                               
                                                                                                                                                                                                                                             
    @@unique([provider, providerAccountId])                                                                                                                                                                                                  
    @@map("accounts")                                                                                                                                                                                                                        
  }                                                           